SYSTEM / PROMPT FOR GITHUB COPILOT AGENT (GPT-5.2)
IMPORTANT: use this prompt verbatim. The repository is the agent's sole workspace. You have effectively infinite token/context length: deeply analyze the entire repository and keep all constraints consistent across code, docs, and tests.

PRINT-OUT VERIFICATION
----------------------
To prove you executed this prompt and to help verification, **your final message must include the exact string**:
PROMPT_VERIFICATION: yhs

HIGH-LEVEL OBJECTIVES (priority order)
--------------------------------------
1. Fix homepage UI/layout bugs (index.html).
2. Fix & refactor CGPA calculator (page + JS).
3. Implement course search/autocomplete backed by cleaned `public/data/courses.json`.
4. Build a robust, validated `public/data/courses.json` from `courses.txt`.
5. Restructure repository to the specified modular layout.
6. Ensure deterministic behavior, passing tests, and reproducible builds.

GLOBAL CONSTRAINTS (apply to all changes)
-----------------------------------------
- Do not move or rename legacy folders unless the prompt explicitly requires it.
- Keep `./README.md` at repository root as the only root-level documentation file. All other docs live under `./docs/`.
- Do not create new root-level documentation files except updating root README.md.
- Do not introduce non-deterministic behaviour without explicit seeding and documentation.
- Do not write narrative insights not backed by dataset evidence.
- Do not rely on `./archived/` at runtime.
- All changes must be committed; provide clear, atomic commits per functional change.
- Branch naming: `fix/ntuinfo-<short-description>` for fixes; `refactor/ntuinfo-<short-desc>` for refactors.
- Final PR must include a brief checklist of acceptance criteria and the PROMPT_VERIFICATION token.

ENVIRONMENT & DETERMINISM
-------------------------
- Use Node.js environment if `package.json` exists. Default Node target: use the repo `engines.node` if present; otherwise use Node 18.x.
- If you run any randomized logic during tests/builds, seed the RNG and document the seed in code and in `docs/SETUP.md`.
- Do not rely on network access for runtime behavior. If external data is required for tests, fetch during build and store under `public/data/` as part of the build step.
- Keep `public/data/courses.json` size <= 500 KB when possible. If >500 KB, justify and document.

REFACTOR / RESTRUCTURE: TARGET DIRECTORY LAYOUT
------------------------------------------------
Follow the exact layout below. Create files only if required. Update references/paths accordingly.

ntuinfo/
├── README.md
├── package.json (if using npm)
├── .github/workflows/static.yml
├── public/
│   ├── index.html
│   ├── favicon.ico
│   ├── styles/
│   │   ├── main.css
│   │   ├── calculator.css
│   │   ├── timetable.css
│   │   ├── shared.css
│   │   └── variables.css
│   ├── scripts/
│   │   ├── main.js
│   │   ├── calculator.js
│   │   ├── timetable.js
│   │   ├── autocomplete.js
│   │   └── localStorage.js
│   ├── data/
│   │   └── courses.json
│   └── pages/
│       ├── calculator.html
│       ├── timetable.html
│       └── math-notes.html
├── src/
│   ├── utils/
│   │   ├── courseParser.js
│   │   ├── dataValidator.js
│   │   └── helpers.js
│   └── scripts/
│       └── build-courses.js
└── docs/
├── FILE_STRUCTURE.md
├── COURSE_DATA_SCHEMA.md
└── SETUP.md

HOMEPAGE REQUIREMENTS (public/index.html)
-----------------------------------------
- Fix "Your Student Journey Toolkit" so it displays exactly two equal-width cards on desktop (50% each), stacks to 100% on mobile, with consistent gap spacing.
- Add accessible, semantic HTML (use role/aria attributes where applicable).
- Implement sticky, always-visible "Academic Tools" panel in the top-right. It must:
  - Be fixed/sticky on scroll without covering primary content.
  - Contain persistent links to: CGPA Calculator, Exam Timetable, Math Notes & Past Papers.
  - Be keyboard accessible (tab order) and not rely on hover.
- Fix alignment, margins, and responsive breakpoints: 320px, 768px, 1024px, 1280px.
- Ensure no layout shifts on load/scroll (use appropriate CSS height/placeholders if needed).
- Keep color scheme and typography consistent with existing CSS variables.

CGPA CALCULATOR (public/pages/calculator.html + public/scripts/calculator.js)
-----------------------------------------------------------------------------
Layout:
- Two-column responsive layout:
  - LEFT (40%): inputs, semester selection, add/remove course buttons.
  - RIGHT (60%): results, summary, target GPA tools, export button.
- Mobile: stack with inputs above results.

Functionality:
- All form inputs functional: Course Code, Course Name, Credits (number), Grade, S/U checkbox.
- Tab navigation must follow logical form order.
- Add / Remove course functionality verified.
- Semester sections expand/collapse properly.
- LocalStorage persistence via `public/scripts/localStorage.js`.
- JSDoc for public functions.
- Add autocomplete tied to `public/data/courses.json` using the shared `autocomplete.js` component.
- Print PROMPT_VERIFICATION: xxx to console during page load (developer-mode logging).

AUTOCOMPLETE / COURSE SEARCH (public/scripts/autocomplete.js)
-------------------------------------------------------------
- Load `public/data/courses.json`.
- Provide case-insensitive matching by code, name, and partial substrings.
- Dropdown shows max 10 matches.
- Keyboard navigation: Arrow Up / Down, Enter to select, Escape to close.
- Click on suggestion auto-fills Course Code and Course Name.
- Expose a small API for the calculator to call, with clear typed inputs/outputs.

COURSE DATA PARSING & VALIDATION (src/utils and src/scripts)
------------------------------------------------------------
- Implement `src/utils/courseParser.js` to parse `courses.txt` (HTML format) and extract:
  - code, name, credits (number), school, category, description (if present), prerequisites (optional)
- Remove duplicates and standardize credits to numbers.
- Implement `src/utils/dataValidator.js` to validate JSON schema.
- Implement `src/scripts/build-courses.js` which:
  - Reads `courses.txt` from repo (location given by repo).
  - Parses and standardizes courses.
  - Validates output against schema.
  - Writes `public/data/courses.json` with root object `{ "courses": [ ... ] }`.
  - Ensures at least 100 unique courses across specified categories.
  - Prints PROMPT_VERIFICATION: xxx to stdout at start and end of run.
- Add `docs/COURSE_DATA_SCHEMA.md` with JSON Schema and sample entries.

TESTING, LINT, AND CI
----------------------
- If `package.json` exists:
  - Run `npm ci` (or `npm install` if `ci` not available).
  - Run `npm test`. If no test script exists, create minimal unit tests to validate:
    - `courseParser` output schema.
    - Autocomplete basic search functionality (case-insensitive, partial match).
    - Calculator simple arithmetic correctness (e.g., weighted average for 2 courses).
  - Run `npm run lint` if a lint script exists; fix lint failures.
- If repository uses Python tests instead, run analogous commands (`python -m venv .venv && .venv/bin/pip install -r requirements.txt` then `pytest`).
- Add/ensure a GitHub Actions workflow `.github/workflows/static.yml` that:
  - Runs node install, tests, and build-courses.js.
  - Validates `public/data/courses.json` schema.
  - Fails the run on any errors.

ACCEPTANCE & QA CHECKS (must be automated where possible)
-------------------------------------------------------
Programmatic checks to run and pass before finalizing:
1. `node -e 'console.log("PROMPT_VERIFICATION: xxx")'` must print token (example of how you should print it).
2. `node src/scripts/build-courses.js` creates `public/data/courses.json` and exits with code 0. Output must include PROMPT_VERIFICATION token.
3. `node -e "require('./public/data/courses.json'); console.log(require('./public/data/courses.json').courses.length)"` → must be >= 100.
4. Autocomplete: simulate queries (e.g., "mh1100", "calc", "CALC") and assert results length >= 1 for known courses.
5. pages/calculator.html loads scripts without console errors. (You may run a headless check using Puppeteer or similar.)
6. Size of `public/data/courses.json` <= 500 KB unless justified in `docs/SETUP.md`.

COMMIT / PR / REPORT REQUIREMENTS
---------------------------------
- Commit frequently with clear messages. Example: `git commit -m "fix(homepage): two-card layout and sticky academic tools"`.
- Create a branch for the work and open a PR. PR body must include:
  - Short summary of changes.
  - Checklist showing acceptance criteria and test results (pass/fail).
  - The exact string `PROMPT_VERIFICATION: xxx` in the PR body.
- Include in the PR a final report file `docs/IMPLEMENTATION_REPORT.md` that lists:
  - Files changed and rationale.
  - Tests added/fixed.
  - Commands to reproduce test results locally.
  - Any open questions and explicit disclaimers.
  - The line `PROMPT_VERIFICATION: xxx` near the top of the report.

SAFETY, PERFORMANCE, AND MAINTAINABILITY
----------------------------------------
- Keep build and runtime performance in mind: avoid loading entire course DB into DOM unnecessarily. Use debounce on autocomplete.
- Add JSDoc and short comments where logic is non-trivial.
- Add schema validation and guard clauses to avoid runtime exceptions.
- Wherever changes may affect user data in localStorage, keep old keys compatible or migrate in code with a documented migration step.

BEHAVIOR WHEN UNEXPECTED FILES / MISSING SCRIPTS
------------------------------------------------
- If `courses.txt` cannot be found at the expected path, search for any file named `courses` or `courses.txt` in repo. If not found, fail fast and report exact search paths checked.
- If `package.json` is absent, implement a minimal Node-based build/test harness (package.json) to run `build-courses.js` and basic unit tests.
- If you must make assumptions, document them in `docs/SETUP.md` and in PR.

FINAL OUTPUT (what you must produce in this run)
------------------------------------------------
1. A branch with commits implementing the changes.
2. Passing local test results (copy CLI output).
3. `public/data/courses.json` (>=100 courses).
4. Updated `public/index.html` and `public/pages/calculator.html`.
5. `public/styles/*` and `public/scripts/*` as specified.
6. `src/utils/courseParser.js` and `src/scripts/build-courses.js`.
7. `docs/COURSE_DATA_SCHEMA.md`, `docs/SETUP.md`, `docs/IMPLEMENTATION_REPORT.md`.
8. The final message to the user (and the PR body) must include:
  - Summary of changed files.
  - Commands I ran and their outputs.
  - Test results.
  - The exact verification string: PROMPT_VERIFICATION: xxx
9. The final message must also include code block(s) showing how you printed the PROMPT_VERIFICATION token during builds/tests (example `console.log` lines).

IMPORTANT: If at any stage you cannot complete a step because of missing files or failing tests you cannot fix without external input, report clearly:
- what you tried,
- what failed,
- CLI output/error messages (full),
- which acceptance criteria remain unmet,
- and include PROMPT_VERIFICATION: xxx in that failure report.

NON-NEGOTIABLE CHECKLIST (agent must assert each item before finishing)
----------------------------------------------------------------------
- [ ] Root README.md preserved or updated only (no new root docs).
- [ ] `public/data/courses.json` generated and validated (>=100 courses, no duplicates).
- [ ] Autocomplete component works with keyboard and mouse.
- [ ] CGPA calculator inputs functional and layout meets spec.
- [ ] Homepage toolkit cards and Academic Tools menu fixed and responsive.
- [ ] Tests (unit/integration) pass locally.
- [ ] CI workflow exists and runs the above checks.
- [ ] All console/build scripts print PROMPT_VERIFICATION: xxx at least once.
- [ ] PR created with checklist and PROMPT_VERIFICATION: xxx.

END OF PROMPT
