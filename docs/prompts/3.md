YOUR ROLE
================================================================================
You are a senior frontend engineer specializing in responsive web applications, state management, and accessibility. Your task is to fix 5 critical issues in the NTU Info student portal and create 2 new working tools (Clubs Explorer, Airport Guide).

SCOPE
================================================================================
**Allowed to modify:**
- public/index.html (banner + home layout)
- public/styles/*.css (all stylesheets)
- public/scripts/*.js (all JavaScript)
- public/pages/*.html (all page templates)
- Create new: public/pages/clubs.html, public/pages/airport.html, public/pages/about.html
- Create new: public/scripts/clubs.js, public/scripts/airport.js (if needed)
- Create new: public/data/clubs.json (if using local data)

**Forbidden:**
- Do NOT modify ./archived/ (reference only)
- Do NOT rely on ./archived/ at runtime
- Do NOT change ./data/ or ./output/ structure
- Do NOT create files outside public/
- Do NOT use external CDN libraries (Vanilla JS + CSS only)
- Do NOT change HTML structure beyond bug fixes (preserve semantic markup)
- Do NOT weaken input validation

HARD CONSTRAINTS
================================================================================
1. **Determinism**: Same input → same output. Use fixed seed if randomness needed.
2. **No Breaking Changes**: All existing functionality must still work.
3. **API Compatibility**: Don't change function signatures or public methods.
4. **Mobile-First**: All pages must be responsive (320px, 768px, 1024px+).
5. **Accessibility**: Keyboard navigation, ARIA labels, color contrast (4.5:1).
6. **No LocalStorage Abuse**: Max 5MB data stored. Graceful fallback if quota exceeded.
7. **Performance**: Page load <2s, smooth animations (60fps target).
8. **Browser Support**: ES6+ (no IE11), Chrome/Safari/Firefox 2 years back.

CURRENT SITUATION (FACTS ONLY)
================================================================================
Observed Issues:
1. Banner active tab selection not visually distinguished
   - Active tab should have red bottom border (#d61d2a) + background highlight
   - State should persist across page reloads via localStorage
   
2. CGPA Calculator not working:
   - Form inputs exist but don't bind to state (typing produces no effect)
   - Summary section too large (200-250px, should be 100-120px)
   - Calculations show 0.00 even after adding courses
   - State not updating due to missing event listeners
   
3. Clubs & Societies page:
   - Currently a placeholder ("Coming Soon")
   - Must become a working tool with searchable database
   - Must support filters: interest, time commitment, location
   
4. Airport Guide page:
   - Currently a placeholder ("Coming Soon")
   - Must become a step-by-step arrival guide
   - Must have actionable steps + contact info + transport options
   
5. About page:
   - Missing entirely
   - Must describe NTU Info purpose, features, how to use
   
6. Color scheme:
   - Currently using generic blue (#0066cc)
   - Must change to NTU Red (#d61d2a) for primary actions
   - Must use NTU Dark Blue (#003366) for secondary elements
   
7. All subpages must be functional tools (not placeholders)

Expected Target (Tolerance):
- Banner tab border clearly visible (no subjectivity)
- CGPA summary height ≤120px (measure in DevTools)
- Calculator updates in real-time (<100ms after input)
- All navigation links work (no 404s)
- Pages render correctly at all 3 breakpoints

DIAGNOSIS TASKS (WHAT YOU MUST INSPECT)
================================================================================
1. **Banner Tab System**
   - Location: public/scripts/bannerTabs.js + public/index.html
   - Action: Verify that document.querySelector('.banner-tabs button.active')
     returns the correct element on page load
   - Log: "Active tab on load:" + element.textContent
   
2. **CGPA Calculator Event Binding**
   - Location: public/pages/calculator.html + public/scripts/calculator.js
   - Action: Search for all <input> fields in calculator
   - Verify: Each has addEventListener('change', ...)
   - Log: "Events attached to N inputs" (count in console)
   - Test: Type in a field, check allData state updates
   
3. **State Update Flow**
   - Location: public/scripts/calculator.js, handleCourseChange() function
   - Action: Trace execution: user types → event fires → handler called →
     state updated → localStorage saved → renderSemesters() called →
     DOM redrawn
   - Log at each step: console.log('[CALC]', 'Step name', data)
   
4. **Summary Section Layout**
   - Location: public/styles/calculator.css
   - Action: Find .cumulative-summary CSS rule
   - Measure: Computed height (should be <120px)
   - Verify: Grid layout with 4 columns in one row
   
5. **Navigation & Page Links**
   - Location: public/index.html
   - Action: List all <a> tags pointing to pages/
   - Verify: All target files exist (clubs.html, airport.html, about.html)
   - Test: Click each link, should not 404

IMPLEMENTATION TASKS
================================================================================
### TASK 1: Fix Banner Active Tab Styling
File: public/styles/main.css
Locate: .banner-tabs button { ... }
Add/Modify:
```css
.banner-tabs button {
  /* existing styles */
  position: relative;
  transition: all 0.2s ease;
}

.banner-tabs button.active {
  border-bottom: 3px solid #d61d2a;
  color: #d61d2a;
  font-weight: 600;
  background-color: rgba(214, 29, 42, 0.05);
}

.banner-tabs button:not(.active) {
  border-bottom: 3px solid transparent;
  color: #666;
}
```

### TASK 2: Fix CGPA Calculator Event Binding
File: public/scripts/calculator.js
Locate: renderSemesters() function (where semester card HTML is generated)
Add event listeners after each input creation:
```javascript
// After: card.innerHTML = `<input id="course-code-${courseId}" ...>`
const codeInput = card.querySelector(`#course-code-${courseId}`);
codeInput.addEventListener('change', (e) => {
  handleCourseChange(semesterId, courseId, 'code', e.target.value);
});

// Repeat for: name, credits, grade, isSU inputs
const nameInput = card.querySelector(`#course-name-${courseId}`);
nameInput.addEventListener('change', (e) => {
  handleCourseChange(semesterId, courseId, 'name', e.target.value);
});

// ... and so on for credits, grade, isSU
```

Ensure handleCourseChange() calls renderSemesters() at end:
```javascript
function handleCourseChange(semesterId, courseId, field, value) {
  // ... existing code ...
  saveToLocalStorage();
  renderSemesters();  // <-- MUST call this
  updateSummary();    // <-- Update summary display
}
```

### TASK 3: Reduce CGPA Summary Section Height
File: public/styles/calculator.css
Locate: .cumulative-summary { ... }
Modify:
```css
.cumulative-summary {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 12px;
  padding: 8px 12px;
  max-height: 110px;
  border-radius: 8px;
  background-color: #f8f9fa;
}

.summary-item {
  padding: 4px 8px;
  text-align: center;
  font-size: 12px;
}

.summary-item-value {
  font-size: 16px;
  font-weight: 600;
  color: #d61d2a;
}
```

### TASK 4: Create Clubs & Societies Explorer
File: public/pages/clubs.html (NEW)
Acceptance Criteria:
- Searchable list of 50+ NTU clubs
- Filters: Category (Sports, Academic, Cultural), Time (Weekly/Monthly), Location
- Real-time filter application
- Each club shows: Name, Category, Members, Meeting times, Contact
- Must load from public/data/clubs.json or embedded data

Template:
```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Clubs & Societies Explorer | NTU Info</title>
  <link rel="stylesheet" href="../styles/main.css">
  <style>
    .clubs-container { max-width: 1000px; margin: 20px auto; }
    .search-bar { width: 100%; padding: 12px; margin-bottom: 20px; }
    .filters { display: flex; gap: 12px; flex-wrap: wrap; margin-bottom: 20px; }
    .club-card { border: 1px solid #ddd; border-radius: 8px; padding: 16px; margin-bottom: 12px; }
    .club-card h3 { margin: 0 0 8px 0; color: #d61d2a; }
    .club-badge { display: inline-block; background: #d61d2a; color: white; padding: 4px 8px; border-radius: 4px; font-size: 12px; margin-right: 8px; }
  </style>
</head>
<body>
  <!-- Navigation/banner (same as index.html) -->
  <div class="clubs-container">
    <h1>NTU Clubs & Societies</h1>
    <input type="text" id="search-bar" class="search-bar" placeholder="Search clubs (e.g., 'volleyball', 'coding')...">
    
    <div class="filters">
      <button class="filter-btn" data-filter="category" data-value="">All</button>
      <button class="filter-btn" data-filter="category" data-value="Sports">Sports</button>
      <button class="filter-btn" data-filter="category" data-value="Academic">Academic</button>
      <button class="filter-btn" data-filter="category" data-value="Cultural">Cultural</button>
    </div>
    
    <div id="clubs-list"></div>
  </div>
  
  <script>
    // Load clubs data
    const clubs = [
      { id: 1, name: 'NTU Volleyball Club', category: 'Sports', members: 45, time: 'Tue/Thu 5pm', location: 'Sports Complex' },
      // ... add 50+ more clubs
    ];
    
    let filteredClubs = [...clubs];
    
    document.getElementById('search-bar').addEventListener('input', (e) => {
      const query = e.target.value.toLowerCase();
      filteredClubs = clubs.filter(c =>
        c.name.toLowerCase().includes(query) ||
        c.category.toLowerCase().includes(query)
      );
      renderClubs();
    });
    
    function renderClubs() {
      const list = document.getElementById('clubs-list');
      list.innerHTML = filteredClubs.map(club => `
        <div class="club-card">
          <h3>${club.name}</h3>
          <span class="club-badge">${club.category}</span>
          <p><strong>Members:</strong> ${club.members}</p>
          <p><strong>Meets:</strong> ${club.time}</p>
          <p><strong>Location:</strong> ${club.location}</p>
        </div>
      `).join('');
    }
    
    renderClubs();
  </script>
</body>
</html>
```

### TASK 5: Create Airport Arrival Guide
File: public/pages/airport.html (NEW)
Acceptance Criteria:
- Step-by-step guide for international students arriving at Changi
- Sections: Before arrival, Landing, Immigration, Currency/SIM, Transport to NTU, On-campus arrival
- Each section has actionable steps + estimated time + contact info
- Mobile responsive, clear typography, NTU branding

Template:
```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Airport Arrival Guide | NTU Info</title>
  <link rel="stylesheet" href="../styles/main.css">
  <style>
    .guide-container { max-width: 800px; margin: 20px auto; }
    .step { border-left: 4px solid #d61d2a; padding: 16px; margin: 20px 0; background: #f8f9fa; }
    .step h2 { margin-top: 0; color: #d61d2a; }
    .step ol, .step ul { margin: 12px 0; }
    .time-est { font-size: 12px; color: #666; background: white; padding: 4px 8px; border-radius: 4px; display: inline-block; margin: 8px 0; }
  </style>
</head>
<body>
  <div class="guide-container">
    <h1>✈️ Arriving at Singapore Changi Airport</h1>
    <p>Complete step-by-step guide for international students arriving at NTU.</p>
    
    <div class="step">
      <h2>Step 1: Before You Arrive</h2>
      <span class="time-est">Preparation Time: 1 week before</span>
      <ol>
        <li>Download your accommodation confirmation (residence or host family details)</li>
        <li>Save NTU Emergency Hotline: +65 6790 9000</li>
        <li>Check exchange rate: SGD is local currency</li>
        <li>Have your student ID card photo ready</li>
      </ol>
    </div>
    
    <div class="step">
      <h2>Step 2: Landing at Changi</h2>
      <span class="time-est">Time: 5 minutes</span>
      <ol>
        <li>Proceed to "Entry by Air" gates</li>
        <li>Follow "Visitors/Tourists" signs (not residents)</li>
        <li>Keep your passport and arrival card ready</li>
      </ol>
    </div>
    
    <!-- ... more steps ... -->
    
    <div class="step">
      <h2>Need Help?</h2>
      <p><strong>NTU International Office:</strong> +65 6790 6000 | intl@ntu.edu.sg</p>
      <p><strong>Airport Info:</strong> +65 6595 6868 | changiairport.com</p>
    </div>
  </div>
</body>
</html>
```

### TASK 6: Create About Page
File: public/pages/about.html (NEW)
Acceptance Criteria:
- Describes NTU Info purpose and features
- Links to GitHub, contact, FAQ
- Professional tone + NTU branding
- Mobile responsive

Content outline:
- Hero: "Your Complete NTU Student Companion"
- Features list: CGPA Calc, Club Explorer, Airport Guide, etc.
- How to use each tool
- FAQ section
- Team/Contact info
- Links to GitHub repo

### TASK 7: Update Color Scheme to NTU Red
File: public/styles/*.css
Action: Global search/replace
```
OLD: #0066cc (generic blue)
NEW: #d61d2a (NTU Red)

OLD: #003366 (dark blue, if used)
NEW: #003366 (keep for secondary, or use #8b0000 for dark red)

OLD: #f0f0f0 (light gray)
NEW: rgba(214, 29, 42, 0.05) (light red tint)
```

Update hover/active states:
```css
.btn:hover { background: #e63946; }  /* Lighter red on hover */
.btn.active { background: #a4161a; }  /* Darker red when active */
```

PRINT-OUT VERIFICATION (MANDATORY)
================================================================================
Add these console logs to verify each fix:

```javascript
// At page load, in banner initialization:
console.log('[BANNER] Active tab:', localStorage.getItem('ntuinfo.banner.activeTab'));
console.log('[BANNER] Active button styling:', window.getComputedStyle(activeButton).borderBottom);

// In CGPA calculator, after adding semester:
console.log('[CALC] All data after add:', JSON.stringify(allData, null, 2));
console.log('[CALC] Summary:', {
  totalCredits: calculateTotalCredits(),
  gradedCredits: calculateGradedCredits(),
  cumulativeCGPA: calculateCumulativeCGPA(allData.semesters)
});

// After typing in calculator input:
console.log('[CALC] Input changed:', { field, value, updatedData: allData });

// For page loads (club, airport, about):
console.log('[PAGE] Loaded successfully:', document.title);
console.log('[PAGE] Total clubs rendered:', document.querySelectorAll('.club-card').length);
console.log('[PAGE] Steps visible:', document.querySelectorAll('.step').length);
```

**REQUIRED OUTPUT FORMAT (paste these logs into verification):**
```
=== BANNER FIX VERIFICATION ===
[BANNER] Active tab: Tools
[BANNER] Active button styling: rgb(214, 29, 42) 3px solid

=== CGPA CALCULATOR FIX VERIFICATION ===
[CALC] All data after add: { "semesters": [{ "id": "...", "courses": [] }] }
[CALC] Summary: { "totalCredits": 0, "gradedCredits": 0, "cumulativeCGPA": 0 }
[CALC] Input changed: { "field": "code", "value": "MH1100", ... }

=== PAGES LOAD VERIFICATION ===
[PAGE] Loaded successfully: Clubs & Societies Explorer | NTU Info
[PAGE] Total clubs rendered: 53
[PAGE] Loaded successfully: Airport Arrival Guide | NTU Info
[PAGE] Steps visible: 6
[PAGE] Loaded successfully: About NTU Info
```

TESTS (MANDATORY)
================================================================================
Create/update: tests/e2e.test.js

```javascript
describe('NTU Info - Integration Tests', () => {
  
  describe('Banner Tab System', () => {
    it('should set active tab styling on page load', () => {
      // Arrange
      const activeTab = document.querySelector('.banner-tabs button.active');
      
      // Assert
      expect(activeTab).toBeTruthy();
      expect(window.getComputedStyle(activeTab).borderBottom).toContain('rgb(214, 29, 42)');
    });
    
    it('should persist active tab in localStorage', () => {
      // Arrange
      const storedTab = localStorage.getItem('ntuinfo.banner.activeTab');
      
      // Assert
      expect(storedTab).toBeTruthy();
      expect(['Home', 'Tools', 'Academics', 'Discover'].includes(storedTab)).toBe(true);
    });
  });
  
  describe('CGPA Calculator', () => {
    it('should update state when course code is entered', () => {
      // Arrange
      addSemester();
      addCourse(allData.semesters.id);
      const codeInput = document.querySelector('[id*="course-code-"]');
      
      // Act
      codeInput.value = 'MH1100';
      codeInput.dispatchEvent(new Event('change', { bubbles: true }));
      
      // Assert
      expect(allData.semesters.courses.code).toBe('MH1100');
    });
    
    it('should calculate CGPA correctly', () => {
      // Arrange
      const courses = [
        { code: 'MH1100', credits: 4, grade: 'A', isSU: false },
        { code: 'CE2301', credits: 3, grade: 'B+', isSU: false }
      ];
      
      // Act
      const cgpa = calculateCumulativeCGPA([{ id: '1', courses }]);
      
      // Assert (Grade points: A=5.0, B+=4.0)
      const expected = ((5.0 * 4 + 4.0 * 3) / (4 + 3)).toFixed(2); // 4.57
      expect(cgpa).toBe(Number(expected));
    });
    
    it('should render summary section with height <= 120px', () => {
      // Arrange
      const summary = document.querySelector('.cumulative-summary');
      
      // Act
      const height = summary?.offsetHeight || 0;
      
      // Assert
      expect(height).toBeLessThanOrEqual(120);
    });
  });
  
  describe('Page Navigation', () => {
    it('should load clubs page without 404', async () => {
      // Arrange
      const link = document.querySelector('a[href*="clubs.html"]');
      
      // Act
      const response = await fetch(link.href);
      
      // Assert
      expect(response.status).toBe(200);
    });
    
    it('should render at least 50 clubs', () => {
      // Arrange
      const clubs = document.querySelectorAll('.club-card');
      
      // Assert
      expect(clubs.length).toBeGreaterThanOrEqual(50);
    });
  });
  
  describe('Color Scheme', () => {
    it('should use NTU red (#d61d2a) as primary color', () => {
      // Arrange
      const button = document.querySelector('.btn-primary:hover');
      
      // Act
      const bgColor = window.getComputedStyle(button).backgroundColor;
      
      // Assert
      expect(bgColor).toContain('214'); // R value of #d61d2a
    });
  });
});
```

Run with: `npm test`

ACCEPTANCE EVIDENCE
================================================================================
To prove completion, provide:

1. **Screenshot**: Banner with red bottom border on active tab
2. **Screenshot**: CGPA Calculator with summary section visible (≤120px height)
3. **Test output**: npm test passes all tests
4. **Console output**: Paste all console.log outputs from PRINT-OUT VERIFICATION section
5. **Browser test**:
    - Click each banner tab → active styling changes
    - Add semester + course in calculator → summary updates
    - Click "Clubs" link → loads clubs.html, displays clubs with search
    - Click "Airport" link → loads airport.html, displays steps
    - Click "About" link → loads about.html, describes website
    - Resize browser to 320px → all pages responsive
    - All links functional (no 404s)

FINAL MESSAGE REQUIREMENT
================================================================================
To prove you have read and executed this implementation prompt, your final
message must include the exact string:

**PROMPT_VERIFICATION: yhs**

This string is required for verification.
